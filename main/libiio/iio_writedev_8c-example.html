<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libiio: iio_writedev.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libiio
   &#160;<span id="projectnumber">0.26</span>
   </div>
   <div id="projectbrief">Library for interfacing with IIO devices</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('iio_writedev_8c-example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">iio_writedev.c</div>  </div>
</div><!--header-->
<div class="contents">
<p>Part of the libiio-utilites, iio_writedev is a utility for writing buffers from connected IIO devices.</p>
<div class="fragment"><div class="line"><span class="comment">// SPDX-License-Identifier: GPL-2.0-or-later</span></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * iio_writedev - Part of the Industrial I/O (IIO) utilities</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Copyright (C) 2014-2018 Analog Devices, Inc.</span></div>
<div class="line"><span class="comment"> * Author: Paul Cercueil &lt;paul.cercueil@analog.com&gt;</span></div>
<div class="line"><span class="comment"> *         that Michael Hennerich &lt;michael.hennerich@analog.com&gt;</span></div>
<div class="line"><span class="comment"> * */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;errno.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;getopt.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="iio_8h.html">iio.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;inttypes.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;signal.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;errno.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef _WIN32</span></div>
<div class="line"><span class="preprocessor">#include &lt;windows.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;fcntl.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;io.h&gt;</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor">#include &lt;unistd.h&gt;</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;iio_common.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define MY_NAME &quot;iio_writedev&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define SAMPLES_PER_READ 256</span></div>
<div class="line"><span class="preprocessor">#define DEFAULT_FREQ_HZ  100</span></div>
<div class="line"><span class="preprocessor">#define REFILL_PER_BENCHMARK 10</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span>option options[] = {</div>
<div class="line">      {<span class="stringliteral">&quot;trigger&quot;</span>, required_argument, 0, <span class="charliteral">&#39;t&#39;</span>},</div>
<div class="line">      {<span class="stringliteral">&quot;buffer-size&quot;</span>, required_argument, 0, <span class="charliteral">&#39;b&#39;</span>},</div>
<div class="line">      {<span class="stringliteral">&quot;samples&quot;</span>, required_argument, 0, <span class="charliteral">&#39;s&#39;</span> },</div>
<div class="line">      {<span class="stringliteral">&quot;auto&quot;</span>, no_argument, 0, <span class="charliteral">&#39;a&#39;</span>},</div>
<div class="line">      {<span class="stringliteral">&quot;cyclic&quot;</span>, no_argument, 0, <span class="charliteral">&#39;c&#39;</span>},</div>
<div class="line">      {<span class="stringliteral">&quot;benchmark&quot;</span>, no_argument, 0, <span class="charliteral">&#39;B&#39;</span>},</div>
<div class="line">      {0, 0, 0, 0},</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *options_descriptions[] = {</div>
<div class="line">    (<span class="stringliteral">&quot;[-t &lt;trigger&gt;] &quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;[-b &lt;buffer-size&gt;] [-s &lt;samples&gt;] &quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;&lt;iio_device&gt; [&lt;channel&gt; ...]&quot;</span>),</div>
<div class="line">    <span class="stringliteral">&quot;Use the specified trigger.&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;Size of the transmit buffer. Default is 256.&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;Number of samples to write, 0 = infinite. Default is 0.&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;Scan for available contexts and if only one is available use it.&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;Use cyclic buffer mode.&quot;</span>,</div>
<div class="line">    (<span class="stringliteral">&quot;Benchmark throughput.&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;\n\t\t\tStatistics will be printed on the standard input.&quot;</span>),</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">struct </span><a name="_a0"></a><a class="code" href="structiio__context.html">iio_context</a> *ctx;</div>
<div class="line"><span class="keyword">static</span> <span class="keyword">struct </span><a name="_a1"></a><a class="code" href="structiio__buffer.html">iio_buffer</a> *buffer;</div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *trigger_name = NULL;</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">size_t</span> num_samples;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">volatile</span> sig_atomic_t app_running = <span class="keyword">true</span>;</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> exit_code = EXIT_SUCCESS;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> quit_all(<span class="keywordtype">int</span> sig)</div>
<div class="line">{</div>
<div class="line">    exit_code = sig;</div>
<div class="line">    app_running = <span class="keyword">false</span>;</div>
<div class="line">    <span class="keywordflow">if</span> (buffer &amp;&amp; exit_code != EXIT_SUCCESS)</div>
<div class="line">        <a name="a2"></a><a class="code" href="group__Buffer.html#ga0e42431688750313cfa077ab4f6e0282">iio_buffer_cancel</a>(buffer);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef _WIN32</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;windows.h&gt;</span></div>
<div class="line"> </div>
<div class="line">BOOL WINAPI sig_handler_fn(DWORD dwCtrlType)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* Runs in its own thread */</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">switch</span> (dwCtrlType) {</div>
<div class="line">    <span class="keywordflow">case</span> CTRL_C_EVENT:</div>
<div class="line">    <span class="keywordflow">case</span> CTRL_CLOSE_EVENT:</div>
<div class="line">        quit_all(SIGTERM);</div>
<div class="line">        <span class="keywordflow">return</span> TRUE;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">return</span> FALSE;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> setup_sig_handler(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    SetConsoleCtrlHandler(sig_handler_fn, TRUE);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#elif NO_THREADS</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> sig_handler(<span class="keywordtype">int</span> sig)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * If the main function is stuck waiting for data it will not abort. If the</span></div>
<div class="line"><span class="comment">     * user presses Ctrl+C a second time we abort without cleaning up.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (!app_running)</div>
<div class="line">        exit(sig);</div>
<div class="line">    app_running = <span class="keyword">false</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> set_handler(<span class="keywordtype">int</span> sig)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>sigaction action;</div>
<div class="line"> </div>
<div class="line">    sigaction(sig, NULL, &amp;action);</div>
<div class="line">    action.sa_handler = sig_handler;</div>
<div class="line">    sigaction(sig, &amp;action, NULL);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> setup_sig_handler(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    set_handler(SIGHUP);</div>
<div class="line">    set_handler(SIGPIPE);</div>
<div class="line">    set_handler(SIGINT);</div>
<div class="line">    set_handler(SIGSEGV);</div>
<div class="line">    set_handler(SIGTERM);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;pthread.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> * sig_handler_thd(<span class="keywordtype">void</span> *data)</div>
<div class="line">{</div>
<div class="line">    sigset_t *mask = data;</div>
<div class="line">    <span class="keywordtype">int</span> ret, sig;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Blocks until one of the termination signals is received */</span></div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line">        ret = sigwait(mask, &amp;sig);</div>
<div class="line">    } <span class="keywordflow">while</span> (ret == EINTR);</div>
<div class="line"> </div>
<div class="line">    quit_all(ret);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> setup_sig_handler(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    sigset_t mask, oldmask;</div>
<div class="line">    pthread_t thd;</div>
<div class="line">    <span class="keywordtype">int</span> ret;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Async signals are difficult to handle and the IIO API is not signal</span></div>
<div class="line"><span class="comment">     * safe. Use a separate thread and handle the signals synchronous so we</span></div>
<div class="line"><span class="comment">     * can call iio_buffer_cancel().</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"> </div>
<div class="line">    sigemptyset(&amp;mask);</div>
<div class="line">    sigaddset(&amp;mask, SIGHUP);</div>
<div class="line">    sigaddset(&amp;mask, SIGPIPE);</div>
<div class="line">    sigaddset(&amp;mask, SIGINT);</div>
<div class="line">    sigaddset(&amp;mask, SIGSEGV);</div>
<div class="line">    sigaddset(&amp;mask, SIGTERM);</div>
<div class="line"> </div>
<div class="line">    pthread_sigmask(SIG_BLOCK, &amp;mask, &amp;oldmask);</div>
<div class="line"> </div>
<div class="line">    ret = pthread_create(&amp;thd, NULL, sig_handler_thd, &amp;mask);</div>
<div class="line">    <span class="keywordflow">if</span> (ret) {</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Failed to create signal handler thread: %d\n&quot;</span>, ret);</div>
<div class="line">        pthread_sigmask(SIG_SETMASK, &amp;oldmask, NULL);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> ssize_t read_sample(<span class="keyword">const</span> <span class="keyword">struct</span> <a name="_a3"></a><a class="code" href="structiio__channel.html">iio_channel</a> *chn,</div>
<div class="line">        <span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> len, <span class="keywordtype">void</span> *d)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">size_t</span> nb = fread(buf, 1, len, stdin);</div>
<div class="line">    <span class="keywordflow">if</span> (num_samples != 0) {</div>
<div class="line">        num_samples--;</div>
<div class="line">        <span class="keywordflow">if</span> (num_samples == 0) {</div>
<div class="line">            quit_all(EXIT_SUCCESS);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> (ssize_t) nb;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define MY_OPTS &quot;t:b:s:T:acB&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">char</span> **argw;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, j, nb_channels;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nb_active_channels = 0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> buffer_size = SAMPLES_PER_READ;</div>
<div class="line">    uint64_t refill_per_benchmark = REFILL_PER_BENCHMARK;</div>
<div class="line">    <span class="keywordtype">int</span> c;</div>
<div class="line">    <span class="keyword">struct </span><a name="_a4"></a><a class="code" href="structiio__device.html">iio_device</a> *dev;</div>
<div class="line">    ssize_t sample_size;</div>
<div class="line">    <span class="keywordtype">bool</span> mib, cyclic_buffer = <span class="keyword">false</span>, benchmark = <span class="keyword">false</span>;</div>
<div class="line">    ssize_t ret;</div>
<div class="line">    <span class="keyword">struct </span>option *opts;</div>
<div class="line">    uint64_t before = 0, after, rate, total;</div>
<div class="line">    <span class="keywordtype">int</span> err_code = EXIT_FAILURE;</div>
<div class="line"> </div>
<div class="line">    argw = dup_argv(MY_NAME, argc, argv);</div>
<div class="line"> </div>
<div class="line">    setup_sig_handler();</div>
<div class="line"> </div>
<div class="line">    ctx = handle_common_opts(MY_NAME, argc, argw, MY_OPTS,</div>
<div class="line">                 options, options_descriptions, &amp;err_code);</div>
<div class="line">    opts = add_common_options(options);</div>
<div class="line">    <span class="keywordflow">if</span> (!opts) {</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Failed to add common options\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">while</span> ((c = getopt_long(argc, argw, <span class="stringliteral">&quot;+&quot;</span> COMMON_OPTIONS MY_OPTS,  <span class="comment">/* Flawfinder: ignore */</span></div>
<div class="line">                    opts, NULL)) != -1) {</div>
<div class="line">        <span class="keywordflow">switch</span> (c) {</div>
<div class="line">        <span class="comment">/* All these are handled in the common */</span></div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;h&#39;</span>:</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;n&#39;</span>:</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;x&#39;</span>:</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;u&#39;</span>:</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;T&#39;</span>:</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;S&#39;</span>:</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;a&#39;</span>:</div>
<div class="line">            <span class="keywordflow">if</span> (!optarg &amp;&amp; argc &gt; optind &amp;&amp; argv[optind] != NULL</div>
<div class="line">                    &amp;&amp; argv[optind][0] != <span class="charliteral">&#39;-&#39;</span>)</div>
<div class="line">                optind++;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;t&#39;</span>:</div>
<div class="line">            <span class="keywordflow">if</span> (!optarg) {</div>
<div class="line">                fprintf(stderr, <span class="stringliteral">&quot;Trigger requires argument\n&quot;</span>);</div>
<div class="line">                <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">            }</div>
<div class="line">            trigger_name = optarg;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;b&#39;</span>:</div>
<div class="line">            <span class="keywordflow">if</span> (!optarg) {</div>
<div class="line">                fprintf(stderr, <span class="stringliteral">&quot;Buffer Size requires argument\n&quot;</span>);</div>
<div class="line">                <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">            }</div>
<div class="line">            buffer_size = sanitize_clamp(<span class="stringliteral">&quot;buffer size&quot;</span>, optarg, 1, SIZE_MAX);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;B&#39;</span>:</div>
<div class="line">            benchmark = <span class="keyword">true</span>;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span>:</div>
<div class="line">            <span class="keywordflow">if</span> (!optarg) {</div>
<div class="line">                fprintf(stderr, <span class="stringliteral">&quot;Number of samples requires argument\n&quot;</span>);</div>
<div class="line">                <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">            }</div>
<div class="line">            num_samples = sanitize_clamp(<span class="stringliteral">&quot;number of samples&quot;</span>, optarg, 0, SIZE_MAX);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;c&#39;</span>:</div>
<div class="line">            cyclic_buffer = <span class="keyword">true</span>;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;?&#39;</span>:</div>
<div class="line">            printf(<span class="stringliteral">&quot;Unknown argument &#39;%c&#39;\n&quot;</span>, c);</div>
<div class="line">            <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    free(opts);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (argc &lt; optind) {</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Too few arguments.\n\n&quot;</span>);</div>
<div class="line">        usage(MY_NAME, options, options_descriptions);</div>
<div class="line">        <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!ctx)</div>
<div class="line">        <span class="keywordflow">return</span> err_code;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!argw[optind]) {</div>
<div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nb_devices = <a name="a5"></a><a class="code" href="group__Context.html#gab4fc2a93fd5824f3c9e06aa81e8097d1">iio_context_get_devices_count</a>(ctx);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (i = 0; i &lt; nb_devices; i++) {</div>
<div class="line">            <span class="keyword">const</span> <span class="keywordtype">char</span> *dev_id = NULL, *label = NULL, *name = NULL;</div>
<div class="line">            <span class="keywordtype">bool</span> hit;</div>
<div class="line"> </div>
<div class="line">            dev = <a name="a6"></a><a class="code" href="group__Context.html#ga3f2813ff34bf96c7c85dd05909f1c709">iio_context_get_device</a>(ctx, i);</div>
<div class="line">            nb_channels = <a name="a7"></a><a class="code" href="group__Device.html#gae10ff440f64dac52b4229eb3f2ebea76">iio_device_get_channels_count</a>(dev);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (!nb_channels)</div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">            hit = <span class="keyword">false</span>;</div>
<div class="line">            <span class="keywordflow">for</span> (j = 0; j &lt; nb_channels; j++) {</div>
<div class="line">                <span class="keyword">struct </span><a class="code" href="structiio__channel.html">iio_channel</a> *ch = <a name="a8"></a><a class="code" href="group__Device.html#ga67289d735b7d8e1ed12ae0ea642bd1ac">iio_device_get_channel</a>(dev, j);</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (!<a name="a9"></a><a class="code" href="group__Channel.html#ga07892a3c0c31e7a3eecf76ec72a8669d">iio_channel_is_scan_element</a>(ch) ||</div>
<div class="line">                        !<a name="a10"></a><a class="code" href="group__Channel.html#ga3c24e9c93e2217c9506073d04b878461">iio_channel_is_output</a>(ch))</div>
<div class="line">                    <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">                hit = <span class="keyword">true</span>;</div>
<div class="line"> </div>
<div class="line">                dev_id = <a name="a11"></a><a class="code" href="group__Device.html#ga9e6610c3dd7cc45bebcc7ed7a1b064c6">iio_device_get_id</a>(dev);</div>
<div class="line">                label = <a name="a12"></a><a class="code" href="group__Device.html#gaa7dfffe6431d1f36abf523470e866641">iio_device_get_label</a>(dev);</div>
<div class="line">                name = <a name="a13"></a><a class="code" href="group__Device.html#ga711666b3b3b6314fbe7e592b4632ab85">iio_device_get_name</a>(dev);</div>
<div class="line"> </div>
<div class="line">                printf(<span class="stringliteral">&quot;Example : &quot;</span> MY_NAME <span class="stringliteral">&quot; -u %s -b 256 -s 1024 %s %s\n&quot;</span>,</div>
<div class="line">                        <a name="a14"></a><a class="code" href="group__Context.html#ga6394d108d425e4a6ed28d00c0e93d6ed">iio_context_get_attr_value</a>(ctx, <span class="stringliteral">&quot;uri&quot;</span>),</div>
<div class="line">                        label ? label : name ? name : dev_id,</div>
<div class="line">                        <a name="a15"></a><a class="code" href="group__Channel.html#gafda1782de4655905ad08a40492f3dc64">iio_channel_get_id</a>(ch));</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">if</span> (hit)</div>
<div class="line">                printf(<span class="stringliteral">&quot;Example : &quot;</span> MY_NAME <span class="stringliteral">&quot; -u %s -b 256 -s 1024 %s\n&quot;</span>,</div>
<div class="line">                        <a class="code" href="group__Context.html#ga6394d108d425e4a6ed28d00c0e93d6ed">iio_context_get_attr_value</a>(ctx, <span class="stringliteral">&quot;uri&quot;</span>),</div>
<div class="line">                        label ? label : name ? name : dev_id);</div>
<div class="line">        }</div>
<div class="line">        <a name="a16"></a><a class="code" href="group__Context.html#ga75de8dae515c539818e52b408830d3ba">iio_context_destroy</a>(ctx);</div>
<div class="line">        usage(MY_NAME, options, options_descriptions);</div>
<div class="line">        <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (benchmark &amp;&amp; cyclic_buffer) {</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Cannot benchmark in cyclic mode.\n&quot;</span>);</div>
<div class="line">        <a class="code" href="group__Context.html#ga75de8dae515c539818e52b408830d3ba">iio_context_destroy</a>(ctx);</div>
<div class="line">        <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    dev = <a name="a17"></a><a class="code" href="group__Context.html#gade1dadfb5bc3c3b236add67f803c50c3">iio_context_find_device</a>(ctx, argw[optind]);</div>
<div class="line">    <span class="keywordflow">if</span> (!dev) {</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Device %s not found\n&quot;</span>, argw[optind]);</div>
<div class="line">        <a class="code" href="group__Context.html#ga75de8dae515c539818e52b408830d3ba">iio_context_destroy</a>(ctx);</div>
<div class="line">        <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (trigger_name) {</div>
<div class="line">        <span class="keyword">struct </span><a class="code" href="structiio__device.html">iio_device</a> *trigger = <a class="code" href="group__Context.html#gade1dadfb5bc3c3b236add67f803c50c3">iio_context_find_device</a>(</div>
<div class="line">                ctx, trigger_name);</div>
<div class="line">        <span class="keywordflow">if</span> (!trigger) {</div>
<div class="line">            fprintf(stderr, <span class="stringliteral">&quot;Trigger %s not found\n&quot;</span>, trigger_name);</div>
<div class="line">            <a class="code" href="group__Context.html#ga75de8dae515c539818e52b408830d3ba">iio_context_destroy</a>(ctx);</div>
<div class="line">            <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!<a name="a18"></a><a class="code" href="group__Device.html#ga7e3e5dee1ac8c082de038829c88edda8">iio_device_is_trigger</a>(trigger)) {</div>
<div class="line">            fprintf(stderr, <span class="stringliteral">&quot;Specified device is not a trigger\n&quot;</span>);</div>
<div class="line">            <a class="code" href="group__Context.html#ga75de8dae515c539818e52b408830d3ba">iio_context_destroy</a>(ctx);</div>
<div class="line">            <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * Fixed rate for now. Try new ABI first,</span></div>
<div class="line"><span class="comment">         * fail gracefully to remain compatible.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a19"></a><a class="code" href="group__Device.html#ga3fcba684f6b07d3f6295759bb788c4d2">iio_device_attr_write_longlong</a>(trigger,</div>
<div class="line">                <span class="stringliteral">&quot;sampling_frequency&quot;</span>, DEFAULT_FREQ_HZ) &lt; 0) {</div>
<div class="line">            ret = <a class="code" href="group__Device.html#ga3fcba684f6b07d3f6295759bb788c4d2">iio_device_attr_write_longlong</a>(trigger,</div>
<div class="line">                <span class="stringliteral">&quot;frequency&quot;</span>, DEFAULT_FREQ_HZ);</div>
<div class="line">            <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">                <span class="keywordtype">char</span> buf[256];</div>
<div class="line">                <a name="a20"></a><a class="code" href="group__TopLevel.html#ga4a117b0ac02e97aeda92e33c063f7cf0">iio_strerror</a>(-(<span class="keywordtype">int</span>)ret, buf, <span class="keyword">sizeof</span>(buf));</div>
<div class="line">                fprintf(stderr, <span class="stringliteral">&quot;sample rate not set : %s\n&quot;</span>, buf);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        ret = <a name="a21"></a><a class="code" href="group__Device.html#ga3b8d1e621357f0755925d98555f53d9a">iio_device_set_trigger</a>(dev, trigger);</div>
<div class="line">        <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">            <span class="keywordtype">char</span> buf[256];</div>
<div class="line">            <a class="code" href="group__TopLevel.html#ga4a117b0ac02e97aeda92e33c063f7cf0">iio_strerror</a>(-(<span class="keywordtype">int</span>)ret, buf, <span class="keyword">sizeof</span>(buf));</div>
<div class="line">            fprintf(stderr, <span class="stringliteral">&quot;set trigger failed : %s\n&quot;</span>, buf);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    nb_channels = <a class="code" href="group__Device.html#gae10ff440f64dac52b4229eb3f2ebea76">iio_device_get_channels_count</a>(dev);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (argc == optind + 1) {</div>
<div class="line">        <span class="comment">/* Enable all channels */</span></div>
<div class="line">        <span class="keywordflow">for</span> (i = 0; i &lt; nb_channels; i++) {</div>
<div class="line">            <span class="keyword">struct </span><a class="code" href="structiio__channel.html">iio_channel</a> *ch = <a class="code" href="group__Device.html#ga67289d735b7d8e1ed12ae0ea642bd1ac">iio_device_get_channel</a>(dev, i);</div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code" href="group__Channel.html#ga3c24e9c93e2217c9506073d04b878461">iio_channel_is_output</a>(ch)) {</div>
<div class="line">                <a name="a22"></a><a class="code" href="group__Channel.html#ga2b787983683d37966b5e1e5c6c121d6a">iio_channel_enable</a>(ch);</div>
<div class="line">                nb_active_channels++;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">for</span> (j = optind + 1; j &lt; (<span class="keywordtype">unsigned</span> int) argc; j++) {</div>
<div class="line">            ret = iio_device_enable_channel(dev, argw[j], <span class="keyword">true</span>);</div>
<div class="line">            <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">                <span class="keywordtype">char</span> buf[256];</div>
<div class="line">                <a class="code" href="group__TopLevel.html#ga4a117b0ac02e97aeda92e33c063f7cf0">iio_strerror</a>(-(<span class="keywordtype">int</span>) ret, buf, <span class="keyword">sizeof</span>(buf));</div>
<div class="line">                fprintf(stderr, <span class="stringliteral">&quot;Bad channel name \&quot;%s\&quot; : %s\n&quot;</span>, argw[j], buf);</div>
<div class="line">                <a class="code" href="group__Context.html#ga75de8dae515c539818e52b408830d3ba">iio_context_destroy</a>(ctx);</div>
<div class="line">                <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">            }</div>
<div class="line">            nb_active_channels++;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!nb_active_channels) {</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;No output channels found\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    sample_size = <a name="a23"></a><a class="code" href="group__Debug.html#ga52b3e955c10d6f962b2c2e749c7c02fb">iio_device_get_sample_size</a>(dev);</div>
<div class="line">    <span class="comment">/* Zero isn&#39;t normally an error code, but in this case it is an error */</span></div>
<div class="line">    <span class="keywordflow">if</span> (sample_size == 0) {</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Unable to get sample size, returned 0\n&quot;</span>);</div>
<div class="line">        <a class="code" href="group__Context.html#ga75de8dae515c539818e52b408830d3ba">iio_context_destroy</a>(ctx);</div>
<div class="line">        <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sample_size &lt; 0) {</div>
<div class="line">        <span class="keywordtype">char</span> buf[256];</div>
<div class="line">        <a class="code" href="group__TopLevel.html#ga4a117b0ac02e97aeda92e33c063f7cf0">iio_strerror</a>(errno, buf, <span class="keyword">sizeof</span>(buf));</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Unable to get sample size : %s\n&quot;</span>, buf);</div>
<div class="line">        <a class="code" href="group__Context.html#ga75de8dae515c539818e52b408830d3ba">iio_context_destroy</a>(ctx);</div>
<div class="line">        <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    buffer = <a name="a24"></a><a class="code" href="group__Buffer.html#gaea8067aca27b93a1260a0c563607a501">iio_device_create_buffer</a>(dev, buffer_size, cyclic_buffer);</div>
<div class="line">    <span class="keywordflow">if</span> (!buffer) {</div>
<div class="line">        <span class="keywordtype">char</span> buf[256];</div>
<div class="line">        <a class="code" href="group__TopLevel.html#ga4a117b0ac02e97aeda92e33c063f7cf0">iio_strerror</a>(errno, buf, <span class="keyword">sizeof</span>(buf));</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Unable to allocate buffer: %s\n&quot;</span>, buf);</div>
<div class="line">        <a class="code" href="group__Context.html#ga75de8dae515c539818e52b408830d3ba">iio_context_destroy</a>(ctx);</div>
<div class="line">        <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef _WIN32</span></div>
<div class="line">    _setmode(_fileno( stdin ), _O_BINARY);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0, total = 0; app_running; ) {</div>
<div class="line">        <span class="keywordflow">if</span> (benchmark) {</div>
<div class="line">            before = get_time_us();</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a name="a25"></a><a class="code" href="group__Buffer.html#ga5532665a8776cec1c209d6cf8d0bb409">iio_buffer_step</a>(buffer) == sample_size) {</div>
<div class="line">            <span class="comment">/* If there are only the samples we requested, we don&#39;t</span></div>
<div class="line"><span class="comment">             * need to demux */</span></div>
<div class="line">            <span class="keywordtype">void</span> *start = <a name="a26"></a><a class="code" href="group__Buffer.html#ga7fdacbfda79aa5120f34ea73ae2ea5ab">iio_buffer_start</a>(buffer);</div>
<div class="line">            <span class="keywordtype">size_t</span> write_len, len = (intptr_t) <a name="a27"></a><a class="code" href="group__Buffer.html#gab5300f917bbdfc5dafc093a60138f131">iio_buffer_end</a>(buffer)</div>
<div class="line">                - (intptr_t) start;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (num_samples &amp;&amp; len &gt; num_samples * sample_size)</div>
<div class="line">                len = num_samples * sample_size;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">for</span> (write_len = len; len; ) {</div>
<div class="line">                <span class="keywordtype">size_t</span> nb = fread(start, 1, len, stdin);</div>
<div class="line">                <span class="keywordflow">if</span> (!nb)</div>
<div class="line">                    <span class="keywordflow">goto</span> err_destroy_buffer;</div>
<div class="line"> </div>
<div class="line">                len -= nb;</div>
<div class="line">                start = (<span class="keywordtype">void</span> *)((intptr_t) start + nb);</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (num_samples) {</div>
<div class="line">                num_samples -= write_len / sample_size;</div>
<div class="line">                <span class="keywordflow">if</span> (!num_samples &amp;&amp; !cyclic_buffer) {</div>
<div class="line">                    quit_all(EXIT_SUCCESS);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            ret = <a name="a28"></a><a class="code" href="group__Buffer.html#ga810ec50155e82331b18ec71d3c507104">iio_buffer_foreach_sample</a>(buffer, read_sample, NULL);</div>
<div class="line">            <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">                <span class="keywordtype">char</span> buf[256];</div>
<div class="line">                <a class="code" href="group__TopLevel.html#ga4a117b0ac02e97aeda92e33c063f7cf0">iio_strerror</a>(-(<span class="keywordtype">int</span>)ret, buf, <span class="keyword">sizeof</span>(buf));</div>
<div class="line">                fprintf(stderr, <span class="stringliteral">&quot;buffer processing failed : %s\n&quot;</span>, buf);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        ret = <a name="a29"></a><a class="code" href="group__Buffer.html#gae7033c625d128667a56cf482aa3149bd">iio_buffer_push</a>(buffer);</div>
<div class="line">        <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">            <span class="keywordtype">char</span> buf[256];</div>
<div class="line">            <a class="code" href="group__TopLevel.html#ga4a117b0ac02e97aeda92e33c063f7cf0">iio_strerror</a>(-(<span class="keywordtype">int</span>)ret, buf, <span class="keyword">sizeof</span>(buf));</div>
<div class="line">            fprintf(stderr, <span class="stringliteral">&quot;Unable to push buffer: %s\n&quot;</span>, buf);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (benchmark) {</div>
<div class="line">            after = get_time_us();</div>
<div class="line">            total += after - before;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (++i == refill_per_benchmark) {</div>
<div class="line">                rate = buffer_size * sample_size *</div>
<div class="line">                    refill_per_benchmark * 1000000ull / total;</div>
<div class="line">                mib = rate &gt; 1048576;</div>
<div class="line"> </div>
<div class="line">                fprintf(stderr, <span class="stringliteral">&quot;\33[2K\rThroughput: %&quot;</span> PRIu64 <span class="stringliteral">&quot; %ciB/s&quot;</span>,</div>
<div class="line">                    rate / (1024 * (mib ? 1024 : 1)),</div>
<div class="line">                    mib ? <span class="charliteral">&#39;M&#39;</span> : <span class="charliteral">&#39;K&#39;</span>);</div>
<div class="line"> </div>
<div class="line">                <span class="comment">/* Print every 100ms more or less */</span></div>
<div class="line">                refill_per_benchmark = refill_per_benchmark * 100000 / total;</div>
<div class="line">                <span class="keywordflow">if</span> (refill_per_benchmark &lt; REFILL_PER_BENCHMARK)</div>
<div class="line">                    refill_per_benchmark = REFILL_PER_BENCHMARK;</div>
<div class="line"> </div>
<div class="line">                i = 0;</div>
<div class="line">                total = 0;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">while</span>(cyclic_buffer &amp;&amp; app_running) {</div>
<div class="line"><span class="preprocessor">#ifdef _WIN32</span></div>
<div class="line">            Sleep(1000);</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">            sleep(1);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">err_destroy_buffer:</div>
<div class="line">    <a name="a30"></a><a class="code" href="group__Buffer.html#gaba58dc2780be63fead6f09397ce90d10">iio_buffer_destroy</a>(buffer);</div>
<div class="line">    <a class="code" href="group__Context.html#ga75de8dae515c539818e52b408830d3ba">iio_context_destroy</a>(ctx);</div>
<div class="line">    free_argw(argc, argw);</div>
<div class="line">    <span class="keywordflow">return</span> exit_code;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__Buffer_html_ga0e42431688750313cfa077ab4f6e0282"><div class="ttname"><a href="group__Buffer.html#ga0e42431688750313cfa077ab4f6e0282">iio_buffer_cancel</a></div><div class="ttdeci">void iio_buffer_cancel(struct iio_buffer *buf)</div><div class="ttdoc">Cancel all buffer operations.</div><div class="ttdef"><b>Definition:</b> buffer.c:313</div></div>
<div class="ttc" id="agroup__Buffer_html_ga5532665a8776cec1c209d6cf8d0bb409"><div class="ttname"><a href="group__Buffer.html#ga5532665a8776cec1c209d6cf8d0bb409">iio_buffer_step</a></div><div class="ttdeci">ptrdiff_t iio_buffer_step(const struct iio_buffer *buffer)</div><div class="ttdoc">Get the step size between two samples of one channel.</div><div class="ttdef"><b>Definition:</b> buffer.c:288</div></div>
<div class="ttc" id="agroup__Buffer_html_ga7fdacbfda79aa5120f34ea73ae2ea5ab"><div class="ttname"><a href="group__Buffer.html#ga7fdacbfda79aa5120f34ea73ae2ea5ab">iio_buffer_start</a></div><div class="ttdeci">void * iio_buffer_start(const struct iio_buffer *buffer)</div><div class="ttdoc">Get the start address of the buffer.</div><div class="ttdef"><b>Definition:</b> buffer.c:245</div></div>
<div class="ttc" id="agroup__Buffer_html_ga810ec50155e82331b18ec71d3c507104"><div class="ttname"><a href="group__Buffer.html#ga810ec50155e82331b18ec71d3c507104">iio_buffer_foreach_sample</a></div><div class="ttdeci">__api __check_ret ssize_t iio_buffer_foreach_sample(struct iio_buffer *buf, ssize_t(*callback)(const struct iio_channel *chn, void *src, size_t bytes, void *d), void *data)</div><div class="ttdoc">Call the supplied callback for each sample found in a buffer.</div></div>
<div class="ttc" id="agroup__Buffer_html_gab5300f917bbdfc5dafc093a60138f131"><div class="ttname"><a href="group__Buffer.html#gab5300f917bbdfc5dafc093a60138f131">iio_buffer_end</a></div><div class="ttdeci">void * iio_buffer_end(const struct iio_buffer *buffer)</div><div class="ttdoc">Get the address that follows the last sample in a buffer.</div><div class="ttdef"><b>Definition:</b> buffer.c:293</div></div>
<div class="ttc" id="agroup__Buffer_html_gaba58dc2780be63fead6f09397ce90d10"><div class="ttname"><a href="group__Buffer.html#gaba58dc2780be63fead6f09397ce90d10">iio_buffer_destroy</a></div><div class="ttdeci">void iio_buffer_destroy(struct iio_buffer *buffer)</div><div class="ttdoc">Destroy the given buffer.</div><div class="ttdef"><b>Definition:</b> buffer.c:104</div></div>
<div class="ttc" id="agroup__Buffer_html_gae7033c625d128667a56cf482aa3149bd"><div class="ttname"><a href="group__Buffer.html#gae7033c625d128667a56cf482aa3149bd">iio_buffer_push</a></div><div class="ttdeci">ssize_t iio_buffer_push(struct iio_buffer *buffer)</div><div class="ttdoc">Send the samples to the hardware.</div><div class="ttdef"><b>Definition:</b> buffer.c:147</div></div>
<div class="ttc" id="agroup__Buffer_html_gaea8067aca27b93a1260a0c563607a501"><div class="ttname"><a href="group__Buffer.html#gaea8067aca27b93a1260a0c563607a501">iio_device_create_buffer</a></div><div class="ttdeci">struct iio_buffer * iio_device_create_buffer(const struct iio_device *dev, size_t samples_count, bool cyclic)</div><div class="ttdoc">Create an input or output buffer associated to the given device.</div><div class="ttdef"><b>Definition:</b> buffer.c:26</div></div>
<div class="ttc" id="agroup__Channel_html_ga07892a3c0c31e7a3eecf76ec72a8669d"><div class="ttname"><a href="group__Channel.html#ga07892a3c0c31e7a3eecf76ec72a8669d">iio_channel_is_scan_element</a></div><div class="ttdeci">bool iio_channel_is_scan_element(const struct iio_channel *chn)</div><div class="ttdoc">Return True if the given channel is a scan element.</div><div class="ttdef"><b>Definition:</b> channel.c:318</div></div>
<div class="ttc" id="agroup__Channel_html_ga2b787983683d37966b5e1e5c6c121d6a"><div class="ttname"><a href="group__Channel.html#ga2b787983683d37966b5e1e5c6c121d6a">iio_channel_enable</a></div><div class="ttdeci">void iio_channel_enable(struct iio_channel *chn)</div><div class="ttdoc">Enable the given channel.</div><div class="ttdef"><b>Definition:</b> channel.c:452</div></div>
<div class="ttc" id="agroup__Channel_html_ga3c24e9c93e2217c9506073d04b878461"><div class="ttname"><a href="group__Channel.html#ga3c24e9c93e2217c9506073d04b878461">iio_channel_is_output</a></div><div class="ttdeci">bool iio_channel_is_output(const struct iio_channel *chn)</div><div class="ttdoc">Return True if the given channel is an output channel.</div><div class="ttdef"><b>Definition:</b> channel.c:313</div></div>
<div class="ttc" id="agroup__Channel_html_gafda1782de4655905ad08a40492f3dc64"><div class="ttname"><a href="group__Channel.html#gafda1782de4655905ad08a40492f3dc64">iio_channel_get_id</a></div><div class="ttdeci">const char * iio_channel_get_id(const struct iio_channel *chn)</div><div class="ttdoc">Retrieve the channel ID (e.g. voltage0)</div><div class="ttdef"><b>Definition:</b> channel.c:303</div></div>
<div class="ttc" id="agroup__Context_html_ga3f2813ff34bf96c7c85dd05909f1c709"><div class="ttname"><a href="group__Context.html#ga3f2813ff34bf96c7c85dd05909f1c709">iio_context_get_device</a></div><div class="ttdeci">struct iio_device * iio_context_get_device(const struct iio_context *ctx, unsigned int index)</div><div class="ttdoc">Get the device present at the given index.</div><div class="ttdef"><b>Definition:</b> context.c:285</div></div>
<div class="ttc" id="agroup__Context_html_ga6394d108d425e4a6ed28d00c0e93d6ed"><div class="ttname"><a href="group__Context.html#ga6394d108d425e4a6ed28d00c0e93d6ed">iio_context_get_attr_value</a></div><div class="ttdeci">const char * iio_context_get_attr_value(const struct iio_context *ctx, const char *name)</div><div class="ttdoc">Retrieve the value of a context-specific attribute.</div><div class="ttdef"><b>Definition:</b> context.c:483</div></div>
<div class="ttc" id="agroup__Context_html_ga75de8dae515c539818e52b408830d3ba"><div class="ttname"><a href="group__Context.html#ga75de8dae515c539818e52b408830d3ba">iio_context_destroy</a></div><div class="ttdeci">void iio_context_destroy(struct iio_context *ctx)</div><div class="ttdoc">Destroy the given context.</div><div class="ttdef"><b>Definition:</b> context.c:258</div></div>
<div class="ttc" id="agroup__Context_html_gab4fc2a93fd5824f3c9e06aa81e8097d1"><div class="ttname"><a href="group__Context.html#gab4fc2a93fd5824f3c9e06aa81e8097d1">iio_context_get_devices_count</a></div><div class="ttdeci">unsigned int iio_context_get_devices_count(const struct iio_context *ctx)</div><div class="ttdoc">Enumerate the devices found in the given context.</div><div class="ttdef"><b>Definition:</b> context.c:280</div></div>
<div class="ttc" id="agroup__Context_html_gade1dadfb5bc3c3b236add67f803c50c3"><div class="ttname"><a href="group__Context.html#gade1dadfb5bc3c3b236add67f803c50c3">iio_context_find_device</a></div><div class="ttdeci">struct iio_device * iio_context_find_device(const struct iio_context *ctx, const char *name)</div><div class="ttdoc">Try to find a device structure by its ID, label or name.</div><div class="ttdef"><b>Definition:</b> context.c:294</div></div>
<div class="ttc" id="agroup__Debug_html_ga52b3e955c10d6f962b2c2e749c7c02fb"><div class="ttname"><a href="group__Debug.html#ga52b3e955c10d6f962b2c2e749c7c02fb">iio_device_get_sample_size</a></div><div class="ttdeci">ssize_t iio_device_get_sample_size(const struct iio_device *dev)</div><div class="ttdoc">Get the current sample size.</div><div class="ttdef"><b>Definition:</b> device.c:483</div></div>
<div class="ttc" id="agroup__Device_html_ga3b8d1e621357f0755925d98555f53d9a"><div class="ttname"><a href="group__Device.html#ga3b8d1e621357f0755925d98555f53d9a">iio_device_set_trigger</a></div><div class="ttdeci">int iio_device_set_trigger(const struct iio_device *dev, const struct iio_device *trigger)</div><div class="ttdoc">Associate a trigger to a given device.</div><div class="ttdef"><b>Definition:</b> device.c:402</div></div>
<div class="ttc" id="agroup__Device_html_ga3fcba684f6b07d3f6295759bb788c4d2"><div class="ttname"><a href="group__Device.html#ga3fcba684f6b07d3f6295759bb788c4d2">iio_device_attr_write_longlong</a></div><div class="ttdeci">int iio_device_attr_write_longlong(const struct iio_device *dev, const char *attr, long long val)</div><div class="ttdoc">Set the value of the given device-specific attribute.</div><div class="ttdef"><b>Definition:</b> device.c:528</div></div>
<div class="ttc" id="agroup__Device_html_ga67289d735b7d8e1ed12ae0ea642bd1ac"><div class="ttname"><a href="group__Device.html#ga67289d735b7d8e1ed12ae0ea642bd1ac">iio_device_get_channel</a></div><div class="ttdeci">struct iio_channel * iio_device_get_channel(const struct iio_device *dev, unsigned int index)</div><div class="ttdoc">Get the channel present at the given index.</div><div class="ttdef"><b>Definition:</b> device.c:148</div></div>
<div class="ttc" id="agroup__Device_html_ga711666b3b3b6314fbe7e592b4632ab85"><div class="ttname"><a href="group__Device.html#ga711666b3b3b6314fbe7e592b4632ab85">iio_device_get_name</a></div><div class="ttdeci">const char * iio_device_get_name(const struct iio_device *dev)</div><div class="ttdoc">Retrieve the device name (e.g. xadc)</div><div class="ttdef"><b>Definition:</b> device.c:133</div></div>
<div class="ttc" id="agroup__Device_html_ga7e3e5dee1ac8c082de038829c88edda8"><div class="ttname"><a href="group__Device.html#ga7e3e5dee1ac8c082de038829c88edda8">iio_device_is_trigger</a></div><div class="ttdeci">bool iio_device_is_trigger(const struct iio_device *dev)</div><div class="ttdoc">Return True if the given device is a trigger.</div><div class="ttdef"><b>Definition:</b> device.c:368</div></div>
<div class="ttc" id="agroup__Device_html_ga9e6610c3dd7cc45bebcc7ed7a1b064c6"><div class="ttname"><a href="group__Device.html#ga9e6610c3dd7cc45bebcc7ed7a1b064c6">iio_device_get_id</a></div><div class="ttdeci">const char * iio_device_get_id(const struct iio_device *dev)</div><div class="ttdoc">Retrieve the device ID (e.g. iio:device0)</div><div class="ttdef"><b>Definition:</b> device.c:128</div></div>
<div class="ttc" id="agroup__Device_html_gaa7dfffe6431d1f36abf523470e866641"><div class="ttname"><a href="group__Device.html#gaa7dfffe6431d1f36abf523470e866641">iio_device_get_label</a></div><div class="ttdeci">const char * iio_device_get_label(const struct iio_device *dev)</div><div class="ttdoc">Retrieve the device label (e.g. lo_pll0_rx_adf4351)</div><div class="ttdef"><b>Definition:</b> device.c:138</div></div>
<div class="ttc" id="agroup__Device_html_gae10ff440f64dac52b4229eb3f2ebea76"><div class="ttname"><a href="group__Device.html#gae10ff440f64dac52b4229eb3f2ebea76">iio_device_get_channels_count</a></div><div class="ttdeci">unsigned int iio_device_get_channels_count(const struct iio_device *dev)</div><div class="ttdoc">Enumerate the channels of the given device.</div><div class="ttdef"><b>Definition:</b> device.c:143</div></div>
<div class="ttc" id="agroup__TopLevel_html_ga4a117b0ac02e97aeda92e33c063f7cf0"><div class="ttname"><a href="group__TopLevel.html#ga4a117b0ac02e97aeda92e33c063f7cf0">iio_strerror</a></div><div class="ttdeci">__api void iio_strerror(int err, char *dst, size_t len)</div><div class="ttdoc">Get a string description of an error code.</div><div class="ttdef"><b>Definition:</b> utilities.c:204</div></div>
<div class="ttc" id="aiio_8h_html"><div class="ttname"><a href="iio_8h.html">iio.h</a></div><div class="ttdoc">Public interface.</div></div>
<div class="ttc" id="astructiio__buffer_html"><div class="ttname"><a href="structiio__buffer.html">iio_buffer</a></div><div class="ttdoc">An input or output buffer, used to read or write samples.</div></div>
<div class="ttc" id="astructiio__channel_html"><div class="ttname"><a href="structiio__channel.html">iio_channel</a></div><div class="ttdoc">Represents an input or output channel of a device.</div></div>
<div class="ttc" id="astructiio__context_html"><div class="ttname"><a href="structiio__context.html">iio_context</a></div><div class="ttdoc">Contains the representation of an IIO context.</div></div>
<div class="ttc" id="astructiio__device_html"><div class="ttname"><a href="structiio__device.html">iio_device</a></div><div class="ttdoc">Represents a device in the IIO context.</div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
    Copyright <a href="https://github.com/analogdevicesinc/libiio/blob/master/Contributors.md">libIIO Contributors</a>
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
