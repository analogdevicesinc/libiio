<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libiio: dummy-iiostream.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libiio
   &#160;<span id="projectnumber">0.23</span>
   </div>
   <div id="projectbrief">Library for interfacing with IIO devices</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('dummy-iiostream_8c-example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">dummy-iiostream.c</div>  </div>
</div><!--header-->
<div class="contents">
<p>This example libiio program is meant to exercise the features of IIO present in the sample dummy IIO device in the linux kernel.</p>
<div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * libiio - Dummy IIO streaming example</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * This example libiio program is meant to exercise the features of IIO present</span></div>
<div class="line"><span class="comment"> * in the sample dummy IIO device. For buffered access it relies on the hrtimer</span></div>
<div class="line"><span class="comment"> * trigger but could be modified to use the sysfs trigger. No hardware should</span></div>
<div class="line"><span class="comment"> * be required to run this program.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Copyright (c) 2016, DAQRI. All rights reserved.</span></div>
<div class="line"><span class="comment"> * Author: Lucas Magasweran &lt;lucas.magasweran@daqri.com&gt;</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Based on AD9361 example:</span></div>
<div class="line"><span class="comment"> * Copyright (C) 2014 IABG mbH</span></div>
<div class="line"><span class="comment"> * Author: Michael Feilen &lt;feilen_at_iabg.de&gt;</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * This program is free software; you can redistribute it and/or</span></div>
<div class="line"><span class="comment"> * modify it under the terms of the GNU General Public License</span></div>
<div class="line"><span class="comment"> * as published by the Free Software Foundation; either version 2</span></div>
<div class="line"><span class="comment"> * of the License, or (at your option) any later version.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment"> * GNU General Public License for more details.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * You should have received a copy of the GNU General Public License</span></div>
<div class="line"><span class="comment"> * along with this program; if not, write to the Free Software</span></div>
<div class="line"><span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * How to setup the sample IIO dummy device and hrtimer trigger:</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * 1. Check if `configfs` is already mounted</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * $ mount | grep &#39;config&#39;</span></div>
<div class="line"><span class="comment"> * configfs on /sys/kernel/config type configfs (rw,relatime)</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * 1.b. Mount `configfs` if it is not already mounted</span></div>
<div class="line"><span class="comment"> *  $ sudo mount -t configfs none /sys/kernel/config</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * 2. Load modules one by one</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * $ sudo modprobe industrialio</span></div>
<div class="line"><span class="comment"> * $ sudo modprobe industrialio-configfs</span></div>
<div class="line"><span class="comment"> * $ sudo modprobe industrialio-sw-device</span></div>
<div class="line"><span class="comment"> * $ sudo modprobe industrialio-sw-trigger</span></div>
<div class="line"><span class="comment"> * $ sudo modprobe iio-trig-hrtimer</span></div>
<div class="line"><span class="comment"> * $ sudo modprobe iio_dummy</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * 3. Create trigger and dummy device under `/sys/kernel/config`</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * $ sudo mkdir /sys/kernel/config/iio/triggers/hrtimer/instance1</span></div>
<div class="line"><span class="comment"> * $ sudo mkdir /sys/kernel/config/iio/devices/dummy/my_dummy_device</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * 4. Run `iio_info` to see that all worked properly</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * $ iio_info</span></div>
<div class="line"><span class="comment"> * Library version: 0.14 (git tag: c9909f2)</span></div>
<div class="line"><span class="comment"> * Compiled with backends: local xml ip</span></div>
<div class="line"><span class="comment"> * IIO context created with local backend.</span></div>
<div class="line"><span class="comment"> * Backend version: 0.14 (git tag: c9909f2)</span></div>
<div class="line"><span class="comment"> * Backend description string: Linux ...</span></div>
<div class="line"><span class="comment"> * IIO context has 1 attributes:</span></div>
<div class="line"><span class="comment"> *         local,kernel: 4.13.0-39-generic</span></div>
<div class="line"><span class="comment"> * IIO context has 2 devices:</span></div>
<div class="line"><span class="comment"> *         iio:device0: my_dummy_device</span></div>
<div class="line"><span class="comment"> *                 10 channels found:</span></div>
<div class="line"><span class="comment"> *                         activity_walking:  (input)</span></div>
<div class="line"><span class="comment"> *                         1 channel-specific attributes found:</span></div>
<div class="line"><span class="comment"> *                                 attr  0: input value: 4</span></div>
<div class="line"><span class="comment"> * ...</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> **/</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;stdbool.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;signal.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;errno.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;getopt.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;inttypes.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="iio_8h.html">iio.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define ARRAY_SIZE(arr) (sizeof(arr) / sizeof((arr)[0]))</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define IIO_ENSURE(expr) { \</span></div>
<div class="line"><span class="preprocessor">    if (!(expr)) { \</span></div>
<div class="line"><span class="preprocessor">        (void) fprintf(stderr, &quot;assertion failed (%s:%d)\n&quot;, __FILE__, __LINE__); \</span></div>
<div class="line"><span class="preprocessor">        (void) abort(); \</span></div>
<div class="line"><span class="preprocessor">    } \</span></div>
<div class="line"><span class="preprocessor">}</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">char</span> *name        = <span class="stringliteral">&quot;iio_dummy_part_no&quot;</span>;</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">char</span> *trigger_str = <span class="stringliteral">&quot;instance1&quot;</span>;</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> buffer_length = 1;</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> count         = -1;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// libiio supports multiple methods for reading data from a buffer</span></div>
<div class="line"><span class="keyword">enum</span> {</div>
<div class="line">    BUFFER_POINTER,</div>
<div class="line">    SAMPLE_CALLBACK,</div>
<div class="line">    CHANNEL_READ_RAW,</div>
<div class="line">    CHANNEL_READ,</div>
<div class="line">    MAX_READ_METHOD,</div>
<div class="line">};</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> buffer_read_method = BUFFER_POINTER;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Streaming devices</span></div>
<div class="line"><span class="keyword">static</span> <span class="keyword">struct </span><a name="_a0"></a><a class="code" href="structiio__device.html">iio_device</a> *dev;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* IIO structs required for streaming */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keyword">struct </span><a name="_a1"></a><a class="code" href="structiio__context.html">iio_context</a> *ctx;</div>
<div class="line"><span class="keyword">static</span> <span class="keyword">struct </span><a name="_a2"></a><a class="code" href="structiio__buffer.html">iio_buffer</a>  *rxbuf;</div>
<div class="line"><span class="keyword">static</span> <span class="keyword">struct </span><a name="_a3"></a><a class="code" href="structiio__channel.html">iio_channel</a> **channels;</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> channel_count;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">bool</span> stop;</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">bool</span> has_repeat;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* cleanup and exit */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> shutdown()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> ret;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (channels) { free(channels); }</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;* Destroying buffers\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (rxbuf) { <a name="a4"></a><a class="code" href="group__Buffer.html#gaba58dc2780be63fead6f09397ce90d10">iio_buffer_destroy</a>(rxbuf); }</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;* Disassociate trigger\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (dev) {</div>
<div class="line">        ret = <a name="a5"></a><a class="code" href="group__Device.html#ga3b8d1e621357f0755925d98555f53d9a">iio_device_set_trigger</a>(dev, NULL);</div>
<div class="line">        <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">            <span class="keywordtype">char</span> buf[256];</div>
<div class="line">            <a name="a6"></a><a class="code" href="group__TopLevel.html#ga4a117b0ac02e97aeda92e33c063f7cf0">iio_strerror</a>(-ret, buf, <span class="keyword">sizeof</span>(buf));</div>
<div class="line">            fprintf(stderr, <span class="stringliteral">&quot;%s while Disassociate trigger\n&quot;</span>, buf);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;* Destroying context\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (ctx) { <a name="a7"></a><a class="code" href="group__Context.html#ga75de8dae515c539818e52b408830d3ba">iio_context_destroy</a>(ctx); }</div>
<div class="line">    exit(0);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> handle_sig(<span class="keywordtype">int</span> sig)</div>
<div class="line">{</div>
<div class="line">    printf(<span class="stringliteral">&quot;Waiting for process to finish... got signal : %d\n&quot;</span>, sig);</div>
<div class="line">    stop = <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> ssize_t sample_cb(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structiio__channel.html">iio_channel</a> *chn, <span class="keywordtype">void</span> *src, <span class="keywordtype">size_t</span> bytes, __notused <span class="keywordtype">void</span> *d)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">const</span> <span class="keyword">struct </span><a name="_a8"></a><a class="code" href="structiio__data__format.html">iio_data_format</a> *fmt = <a name="a9"></a><a class="code" href="group__Debug.html#gadbb2dabfdd85c3f2c6b168f0512c7748">iio_channel_get_data_format</a>(chn);</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j, <a name="a10"></a><a class="code" href="structiio__data__format.html#a6db4ae39ce3e564aac2b31d0948a1efe">repeat</a> = has_repeat ? fmt-&gt;<a class="code" href="structiio__data__format.html#a6db4ae39ce3e564aac2b31d0948a1efe">repeat</a> : 1;</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;%s &quot;</span>, <a name="a11"></a><a class="code" href="group__Channel.html#gab5f7860e9e32e95d51e666fc7fcd0a71">iio_channel_get_id</a>(chn));</div>
<div class="line">    <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="structiio__data__format.html#a6db4ae39ce3e564aac2b31d0948a1efe">repeat</a>; ++j) {</div>
<div class="line">        <span class="keywordflow">if</span> (bytes == <span class="keyword">sizeof</span>(int16_t))</div>
<div class="line">            printf(<span class="stringliteral">&quot;%&quot;</span> PRIi16 <span class="stringliteral">&quot; &quot;</span>, ((int16_t *)src)[j]);</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bytes == <span class="keyword">sizeof</span>(int64_t))</div>
<div class="line">            printf(<span class="stringliteral">&quot;%&quot;</span> PRId64 <span class="stringliteral">&quot; &quot;</span>, ((int64_t *)src)[j]);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> bytes * <a class="code" href="structiio__data__format.html#a6db4ae39ce3e564aac2b31d0948a1efe">repeat</a>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> usage(__notused <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">    printf(<span class="stringliteral">&quot;Usage: %s [OPTION]\n&quot;</span>, argv[0]);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  -d\tdevice name (default \&quot;iio_dummy_part_no\&quot;)\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  -t\ttrigger name (default \&quot;instance1\&quot;)\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  -b\tbuffer length (default 1)\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  -r\tread method (default 0 pointer, 1 callback, 2 read raw, 3 read)\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  -c\tread count (default no limit)\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> parse_options(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> c;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> ((c = getopt(argc, argv, <span class="stringliteral">&quot;d:t:b:r:c:h&quot;</span>)) != -1) {</div>
<div class="line">        <span class="keywordflow">switch</span> (c)</div>
<div class="line">        {</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;d&#39;</span>:</div>
<div class="line">            name = optarg;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;t&#39;</span>:</div>
<div class="line">            trigger_str = optarg;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;b&#39;</span>:</div>
<div class="line">            buffer_length = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;r&#39;</span>:</div>
<div class="line">            <span class="keywordflow">if</span> (atoi(optarg) &gt;= 0 &amp;&amp; atoi(optarg) &lt; MAX_READ_METHOD) {</div>
<div class="line">                buffer_read_method = atoi(optarg);</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                usage(argc, argv);</div>
<div class="line">                exit(1);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;c&#39;</span>:</div>
<div class="line">            <span class="keywordflow">if</span> (atoi(optarg) &gt; 0) {</div>
<div class="line">                count = atoi(optarg);</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                usage(argc, argv);</div>
<div class="line">                exit(1);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;h&#39;</span>:</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            usage(argc, argv);</div>
<div class="line">            exit(1);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* simple configuration and streaming */</span></div>
<div class="line"><span class="keywordtype">int</span> main (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Hardware trigger</span></div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structiio__device.html">iio_device</a> *trigger;</div>
<div class="line"> </div>
<div class="line">    parse_options(argc, argv);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Listen to ctrl+c and assert</span></div>
<div class="line">    signal(SIGINT, handle_sig);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, j, major, minor;</div>
<div class="line">    <span class="keywordtype">char</span> git_tag[8];</div>
<div class="line">    <a name="a12"></a><a class="code" href="group__TopLevel.html#gaaa29e5bac86d00a1cef6e2d00b0ea24c">iio_library_get_version</a>(&amp;major, &amp;minor, git_tag);</div>
<div class="line">    printf(<span class="stringliteral">&quot;Library version: %u.%u (git tag: %s)\n&quot;</span>, major, minor, git_tag);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* check for struct iio_data_format.repeat support</span></div>
<div class="line"><span class="comment">     * 0.8 has repeat support, so anything greater than that */</span></div>
<div class="line">    has_repeat = ((major * 10000) + minor) &gt;= 8 ? true : <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;* Acquiring IIO context\n&quot;</span>);</div>
<div class="line">    IIO_ENSURE((ctx = <a name="a13"></a><a class="code" href="group__Context.html#ga21076125f817a680e0c01d4a490f0416">iio_create_default_context</a>()) &amp;&amp; <span class="stringliteral">&quot;No context&quot;</span>);</div>
<div class="line">    IIO_ENSURE(<a name="a14"></a><a class="code" href="group__Context.html#gab4fc2a93fd5824f3c9e06aa81e8097d1">iio_context_get_devices_count</a>(ctx) &gt; 0 &amp;&amp; <span class="stringliteral">&quot;No devices&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;* Acquiring device %s\n&quot;</span>, name);</div>
<div class="line">    dev = <a name="a15"></a><a class="code" href="group__Context.html#gade1dadfb5bc3c3b236add67f803c50c3">iio_context_find_device</a>(ctx, name);</div>
<div class="line">    <span class="keywordflow">if</span> (!dev) {</div>
<div class="line">        perror(<span class="stringliteral">&quot;No device found&quot;</span>);</div>
<div class="line">        shutdown();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;* Initializing IIO streaming channels:\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; <a name="a16"></a><a class="code" href="group__Device.html#gae10ff440f64dac52b4229eb3f2ebea76">iio_device_get_channels_count</a>(dev); ++i) {</div>
<div class="line">        <span class="keyword">struct </span><a class="code" href="structiio__channel.html">iio_channel</a> *chn = <a name="a17"></a><a class="code" href="group__Device.html#ga67289d735b7d8e1ed12ae0ea642bd1ac">iio_device_get_channel</a>(dev, i);</div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a18"></a><a class="code" href="group__Channel.html#ga07892a3c0c31e7a3eecf76ec72a8669d">iio_channel_is_scan_element</a>(chn)) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="group__Channel.html#gab5f7860e9e32e95d51e666fc7fcd0a71">iio_channel_get_id</a>(chn));</div>
<div class="line">            channel_count++;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (channel_count == 0) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;No scan elements found (make sure the driver built with &#39;CONFIG_IIO_SIMPLE_DUMMY_BUFFER=y&#39;)\n&quot;</span>);</div>
<div class="line">        shutdown();</div>
<div class="line">    }</div>
<div class="line">    channels = calloc(channel_count, <span class="keyword">sizeof</span> *channels);</div>
<div class="line">    <span class="keywordflow">if</span> (!channels) {</div>
<div class="line">        perror(<span class="stringliteral">&quot;Channel array allocation failed&quot;</span>);</div>
<div class="line">        shutdown();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; channel_count; ++i) {</div>
<div class="line">        <span class="keyword">struct </span><a class="code" href="structiio__channel.html">iio_channel</a> *chn = <a class="code" href="group__Device.html#ga67289d735b7d8e1ed12ae0ea642bd1ac">iio_device_get_channel</a>(dev, i);</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__Channel.html#ga07892a3c0c31e7a3eecf76ec72a8669d">iio_channel_is_scan_element</a>(chn))</div>
<div class="line">            channels[i] = chn;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;* Acquiring trigger %s\n&quot;</span>, trigger_str);</div>
<div class="line">    trigger = <a class="code" href="group__Context.html#gade1dadfb5bc3c3b236add67f803c50c3">iio_context_find_device</a>(ctx, trigger_str);</div>
<div class="line">    <span class="keywordflow">if</span> (!trigger || !<a name="a19"></a><a class="code" href="group__Device.html#ga7e3e5dee1ac8c082de038829c88edda8">iio_device_is_trigger</a>(trigger)) {</div>
<div class="line">        perror(<span class="stringliteral">&quot;No trigger found (try setting up the iio-trig-hrtimer module)&quot;</span>);</div>
<div class="line">        shutdown();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;* Enabling IIO streaming channels for buffered capture\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; channel_count; ++i)</div>
<div class="line">        <a name="a20"></a><a class="code" href="group__Channel.html#ga2b787983683d37966b5e1e5c6c121d6a">iio_channel_enable</a>(channels[i]);</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;* Enabling IIO buffer trigger\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__Device.html#ga3b8d1e621357f0755925d98555f53d9a">iio_device_set_trigger</a>(dev, trigger)) {</div>
<div class="line">        perror(<span class="stringliteral">&quot;Could not set trigger\n&quot;</span>);</div>
<div class="line">        shutdown();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;* Creating non-cyclic IIO buffers with %d samples\n&quot;</span>, buffer_length);</div>
<div class="line">    rxbuf = <a name="a21"></a><a class="code" href="group__Buffer.html#gaea8067aca27b93a1260a0c563607a501">iio_device_create_buffer</a>(dev, buffer_length, <span class="keyword">false</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (!rxbuf) {</div>
<div class="line">        perror(<span class="stringliteral">&quot;Could not create buffer&quot;</span>);</div>
<div class="line">        shutdown();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;* Starting IO streaming (press CTRL+C to cancel)\n&quot;</span>);</div>
<div class="line">    <span class="keywordtype">bool</span> has_ts = strcmp(<a class="code" href="group__Channel.html#gab5f7860e9e32e95d51e666fc7fcd0a71">iio_channel_get_id</a>(channels[channel_count-1]), <span class="stringliteral">&quot;timestamp&quot;</span>) == 0;</div>
<div class="line">    int64_t last_ts = 0;</div>
<div class="line">    <span class="keywordflow">while</span> (!stop)</div>
<div class="line">    {</div>
<div class="line">        ssize_t nbytes_rx;</div>
<div class="line">        <span class="comment">/* we use a char pointer, rather than a void pointer, for p_dat &amp; p_end</span></div>
<div class="line"><span class="comment">         * to ensure the compiler understands the size is a byte, and then we</span></div>
<div class="line"><span class="comment">         * can do math on it.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">        <span class="keywordtype">char</span> *p_dat, *p_end;</div>
<div class="line">        ptrdiff_t p_inc;</div>
<div class="line">        int64_t now_ts;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Refill RX buffer</span></div>
<div class="line">        nbytes_rx = <a name="a22"></a><a class="code" href="group__Buffer.html#gac999e5244b5a2cbbca5ecaef8303a4ff">iio_buffer_refill</a>(rxbuf);</div>
<div class="line">        <span class="keywordflow">if</span> (nbytes_rx &lt; 0) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Error refilling buf: %d\n&quot;</span>, (<span class="keywordtype">int</span>)nbytes_rx);</div>
<div class="line">            shutdown();</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        p_inc = <a name="a23"></a><a class="code" href="group__Buffer.html#ga5532665a8776cec1c209d6cf8d0bb409">iio_buffer_step</a>(rxbuf);</div>
<div class="line">        p_end = <a name="a24"></a><a class="code" href="group__Buffer.html#gab5300f917bbdfc5dafc093a60138f131">iio_buffer_end</a>(rxbuf);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Print timestamp delta in ms</span></div>
<div class="line">        <span class="keywordflow">if</span> (has_ts)</div>
<div class="line">            <span class="keywordflow">for</span> (p_dat = <a name="a25"></a><a class="code" href="group__Buffer.html#ga000d2f4c8b72060db1c38ec905bf4156">iio_buffer_first</a>(rxbuf, channels[channel_count-1]); p_dat &lt; p_end; p_dat += p_inc) {</div>
<div class="line">                now_ts = (((int64_t *)p_dat)[0]);</div>
<div class="line">                printf(<span class="stringliteral">&quot;[%04&quot;</span> PRId64 <span class="stringliteral">&quot;] &quot;</span>, last_ts &gt; 0 ? (now_ts - last_ts)/1000/1000 : 0);</div>
<div class="line">                last_ts = now_ts;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Print each captured sample</span></div>
<div class="line">        <span class="keywordflow">switch</span> (buffer_read_method)</div>
<div class="line">        {</div>
<div class="line">        <span class="keywordflow">case</span> BUFFER_POINTER:</div>
<div class="line">            <span class="keywordflow">for</span> (i = 0; i &lt; channel_count; ++i) {</div>
<div class="line">                <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structiio__data__format.html">iio_data_format</a> *fmt = <a class="code" href="group__Debug.html#gadbb2dabfdd85c3f2c6b168f0512c7748">iio_channel_get_data_format</a>(channels[i]);</div>
<div class="line">                <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structiio__data__format.html#a6db4ae39ce3e564aac2b31d0948a1efe">repeat</a> = has_repeat ? fmt-&gt;<a class="code" href="structiio__data__format.html#a6db4ae39ce3e564aac2b31d0948a1efe">repeat</a> : 1;</div>
<div class="line"> </div>
<div class="line">                printf(<span class="stringliteral">&quot;%s &quot;</span>, <a class="code" href="group__Channel.html#gab5f7860e9e32e95d51e666fc7fcd0a71">iio_channel_get_id</a>(channels[i]));</div>
<div class="line">                <span class="keywordflow">for</span> (p_dat = <a class="code" href="group__Buffer.html#ga000d2f4c8b72060db1c38ec905bf4156">iio_buffer_first</a>(rxbuf, channels[i]); p_dat &lt; p_end; p_dat += p_inc) {</div>
<div class="line">                    <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="structiio__data__format.html#a6db4ae39ce3e564aac2b31d0948a1efe">repeat</a>; ++j) {</div>
<div class="line">                        <span class="keywordflow">if</span> (fmt-&gt;<a name="a26"></a><a class="code" href="structiio__data__format.html#a80a90d327d93ba59c4717f2fcf420930">length</a>/8 == <span class="keyword">sizeof</span>(int16_t))</div>
<div class="line">                            printf(<span class="stringliteral">&quot;%&quot;</span> PRIi16 <span class="stringliteral">&quot; &quot;</span>, ((int16_t *)p_dat)[j]);</div>
<div class="line">                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fmt-&gt;<a class="code" href="structiio__data__format.html#a80a90d327d93ba59c4717f2fcf420930">length</a>/8 == <span class="keyword">sizeof</span>(int64_t))</div>
<div class="line">                            printf(<span class="stringliteral">&quot;%&quot;</span> PRId64 <span class="stringliteral">&quot; &quot;</span>, ((int64_t *)p_dat)[j]);</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">case</span> SAMPLE_CALLBACK: {</div>
<div class="line">            <span class="keywordtype">int</span> ret;</div>
<div class="line">            ret = <a name="a27"></a><a class="code" href="group__Buffer.html#ga810ec50155e82331b18ec71d3c507104">iio_buffer_foreach_sample</a>(rxbuf, sample_cb, NULL);</div>
<div class="line">            <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">                <span class="keywordtype">char</span> buf[256];</div>
<div class="line">                <a class="code" href="group__TopLevel.html#ga4a117b0ac02e97aeda92e33c063f7cf0">iio_strerror</a>(-ret, buf, <span class="keyword">sizeof</span>(buf));</div>
<div class="line">                fprintf(stderr, <span class="stringliteral">&quot;%s while processing buffer\n&quot;</span>, buf);</div>
<div class="line">            }</div>
<div class="line">            printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">case</span> CHANNEL_READ_RAW:</div>
<div class="line">        <span class="keywordflow">case</span> CHANNEL_READ:</div>
<div class="line">            <span class="keywordflow">for</span> (i = 0; i &lt; channel_count; ++i) {</div>
<div class="line">                uint8_t *buf;</div>
<div class="line">                <span class="keywordtype">size_t</span> sample, bytes;</div>
<div class="line">                <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structiio__data__format.html">iio_data_format</a> *fmt = <a class="code" href="group__Debug.html#gadbb2dabfdd85c3f2c6b168f0512c7748">iio_channel_get_data_format</a>(channels[i]);</div>
<div class="line">                <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structiio__data__format.html#a6db4ae39ce3e564aac2b31d0948a1efe">repeat</a> = has_repeat ? fmt-&gt;<a class="code" href="structiio__data__format.html#a6db4ae39ce3e564aac2b31d0948a1efe">repeat</a> : 1;</div>
<div class="line">                <span class="keywordtype">size_t</span> sample_size = fmt-&gt;<a class="code" href="structiio__data__format.html#a80a90d327d93ba59c4717f2fcf420930">length</a> / 8 * <a class="code" href="structiio__data__format.html#a6db4ae39ce3e564aac2b31d0948a1efe">repeat</a>;</div>
<div class="line"> </div>
<div class="line">                buf = malloc(sample_size * buffer_length);</div>
<div class="line">                <span class="keywordflow">if</span> (!buf) {</div>
<div class="line">                    perror(<span class="stringliteral">&quot;trying to allocate memory for buffer\n&quot;</span>);</div>
<div class="line">                    shutdown();</div>
<div class="line">                }</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (buffer_read_method == CHANNEL_READ_RAW)</div>
<div class="line">                    bytes = <a name="a28"></a><a class="code" href="group__Channel.html#gacd227a6861960ea2fb49d957f62887dd">iio_channel_read_raw</a>(channels[i], rxbuf, buf, sample_size * buffer_length);</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                    bytes = <a name="a29"></a><a class="code" href="group__Channel.html#ga5c01edc37b0b57aef503abd5989a6a30">iio_channel_read</a>(channels[i], rxbuf, buf, sample_size * buffer_length);</div>
<div class="line"> </div>
<div class="line">                printf(<span class="stringliteral">&quot;%s &quot;</span>, <a class="code" href="group__Channel.html#gab5f7860e9e32e95d51e666fc7fcd0a71">iio_channel_get_id</a>(channels[i]));</div>
<div class="line">                <span class="keywordflow">for</span> (sample = 0; sample &lt; bytes / sample_size; ++sample) {</div>
<div class="line">                    <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="structiio__data__format.html#a6db4ae39ce3e564aac2b31d0948a1efe">repeat</a>; ++j) {</div>
<div class="line">                        <span class="keywordflow">if</span> (fmt-&gt;<a class="code" href="structiio__data__format.html#a80a90d327d93ba59c4717f2fcf420930">length</a> / 8 == <span class="keyword">sizeof</span>(int16_t))</div>
<div class="line">                            printf(<span class="stringliteral">&quot;%&quot;</span> PRIi16 <span class="stringliteral">&quot; &quot;</span>, ((int16_t *)buf)[sample+j]);</div>
<div class="line">                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fmt-&gt;<a class="code" href="structiio__data__format.html#a80a90d327d93ba59c4717f2fcf420930">length</a> / 8 == <span class="keyword">sizeof</span>(int64_t))</div>
<div class="line">                            printf(<span class="stringliteral">&quot;%&quot;</span> PRId64 <span class="stringliteral">&quot; &quot;</span>, ((int64_t *)buf)[sample+j]);</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line"> </div>
<div class="line">                free(buf);</div>
<div class="line">            }</div>
<div class="line">            printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (count != -1 &amp;&amp; --count == 0)</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    shutdown();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="agroup__Buffer_html_ga810ec50155e82331b18ec71d3c507104"><div class="ttname"><a href="group__Buffer.html#ga810ec50155e82331b18ec71d3c507104">iio_buffer_foreach_sample</a></div><div class="ttdeci">__api __check_ret ssize_t iio_buffer_foreach_sample(struct iio_buffer *buf, ssize_t(*callback)(const struct iio_channel *chn, void *src, size_t bytes, void *d), void *data)</div><div class="ttdoc">Call the supplied callback for each sample found in a buffer.</div></div>
<div class="ttc" id="agroup__Buffer_html_gab5300f917bbdfc5dafc093a60138f131"><div class="ttname"><a href="group__Buffer.html#gab5300f917bbdfc5dafc093a60138f131">iio_buffer_end</a></div><div class="ttdeci">void * iio_buffer_end(const struct iio_buffer *buffer)</div><div class="ttdoc">Get the address that follows the last sample in a buffer.</div><div class="ttdef"><b>Definition:</b> buffer.c:293</div></div>
<div class="ttc" id="astructiio__channel_html"><div class="ttname"><a href="structiio__channel.html">iio_channel</a></div><div class="ttdoc">Represents an input or output channel of a device.</div></div>
<div class="ttc" id="agroup__Channel_html_ga5c01edc37b0b57aef503abd5989a6a30"><div class="ttname"><a href="group__Channel.html#ga5c01edc37b0b57aef503abd5989a6a30">iio_channel_read</a></div><div class="ttdeci">size_t iio_channel_read(const struct iio_channel *chn, struct iio_buffer *buf, void *dst, size_t len)</div><div class="ttdoc">Demultiplex and convert the samples of a given channel.</div><div class="ttdef"><b>Definition:</b> channel.c:557</div></div>
<div class="ttc" id="agroup__Channel_html_ga2b787983683d37966b5e1e5c6c121d6a"><div class="ttname"><a href="group__Channel.html#ga2b787983683d37966b5e1e5c6c121d6a">iio_channel_enable</a></div><div class="ttdeci">void iio_channel_enable(struct iio_channel *chn)</div><div class="ttdoc">Enable the given channel.</div><div class="ttdef"><b>Definition:</b> channel.c:367</div></div>
<div class="ttc" id="agroup__Buffer_html_ga5532665a8776cec1c209d6cf8d0bb409"><div class="ttname"><a href="group__Buffer.html#ga5532665a8776cec1c209d6cf8d0bb409">iio_buffer_step</a></div><div class="ttdeci">ptrdiff_t iio_buffer_step(const struct iio_buffer *buffer)</div><div class="ttdoc">Get the step size between two samples of one channel.</div><div class="ttdef"><b>Definition:</b> buffer.c:288</div></div>
<div class="ttc" id="aiio_8h_html"><div class="ttname"><a href="iio_8h.html">iio.h</a></div><div class="ttdoc">Public interface.</div></div>
<div class="ttc" id="agroup__Buffer_html_gac999e5244b5a2cbbca5ecaef8303a4ff"><div class="ttname"><a href="group__Buffer.html#gac999e5244b5a2cbbca5ecaef8303a4ff">iio_buffer_refill</a></div><div class="ttdeci">ssize_t iio_buffer_refill(struct iio_buffer *buffer)</div><div class="ttdoc">Fetch more samples from the hardware.</div><div class="ttdef"><b>Definition:</b> buffer.c:123</div></div>
<div class="ttc" id="astructiio__data__format_html_a6db4ae39ce3e564aac2b31d0948a1efe"><div class="ttname"><a href="structiio__data__format.html#a6db4ae39ce3e564aac2b31d0948a1efe">iio_data_format::repeat</a></div><div class="ttdeci">unsigned int repeat</div><div class="ttdoc">Number of times length repeats (added in v0.8)</div><div class="ttdef"><b>Definition:</b> iio.h:1586</div></div>
<div class="ttc" id="agroup__Context_html_gab4fc2a93fd5824f3c9e06aa81e8097d1"><div class="ttname"><a href="group__Context.html#gab4fc2a93fd5824f3c9e06aa81e8097d1">iio_context_get_devices_count</a></div><div class="ttdeci">unsigned int iio_context_get_devices_count(const struct iio_context *ctx)</div><div class="ttdoc">Enumerate the devices found in the given context.</div><div class="ttdef"><b>Definition:</b> context.c:280</div></div>
<div class="ttc" id="agroup__Device_html_ga67289d735b7d8e1ed12ae0ea642bd1ac"><div class="ttname"><a href="group__Device.html#ga67289d735b7d8e1ed12ae0ea642bd1ac">iio_device_get_channel</a></div><div class="ttdeci">struct iio_channel * iio_device_get_channel(const struct iio_device *dev, unsigned int index)</div><div class="ttdoc">Get the channel present at the given index.</div><div class="ttdef"><b>Definition:</b> device.c:148</div></div>
<div class="ttc" id="astructiio__buffer_html"><div class="ttname"><a href="structiio__buffer.html">iio_buffer</a></div><div class="ttdoc">An input or output buffer, used to read or write samples.</div></div>
<div class="ttc" id="astructiio__data__format_html"><div class="ttname"><a href="structiio__data__format.html">iio_data_format</a></div><div class="ttdoc">Contains the format of a data sample.</div><div class="ttdef"><b>Definition:</b> iio.h:1560</div></div>
<div class="ttc" id="agroup__Context_html_ga75de8dae515c539818e52b408830d3ba"><div class="ttname"><a href="group__Context.html#ga75de8dae515c539818e52b408830d3ba">iio_context_destroy</a></div><div class="ttdeci">void iio_context_destroy(struct iio_context *ctx)</div><div class="ttdoc">Destroy the given context.</div><div class="ttdef"><b>Definition:</b> context.c:258</div></div>
<div class="ttc" id="agroup__Channel_html_gab5f7860e9e32e95d51e666fc7fcd0a71"><div class="ttname"><a href="group__Channel.html#gab5f7860e9e32e95d51e666fc7fcd0a71">iio_channel_get_id</a></div><div class="ttdeci">const char * iio_channel_get_id(const struct iio_channel *chn)</div><div class="ttdoc">Retrieve the channel ID (e.g. voltage0)</div><div class="ttdef"><b>Definition:</b> channel.c:258</div></div>
<div class="ttc" id="astructiio__data__format_html_a80a90d327d93ba59c4717f2fcf420930"><div class="ttname"><a href="structiio__data__format.html#a80a90d327d93ba59c4717f2fcf420930">iio_data_format::length</a></div><div class="ttdeci">unsigned int length</div><div class="ttdoc">Total length of the sample, in bits.</div><div class="ttdef"><b>Definition:</b> iio.h:1562</div></div>
<div class="ttc" id="agroup__Buffer_html_gaba58dc2780be63fead6f09397ce90d10"><div class="ttname"><a href="group__Buffer.html#gaba58dc2780be63fead6f09397ce90d10">iio_buffer_destroy</a></div><div class="ttdeci">void iio_buffer_destroy(struct iio_buffer *buffer)</div><div class="ttdoc">Destroy the given buffer.</div><div class="ttdef"><b>Definition:</b> buffer.c:104</div></div>
<div class="ttc" id="agroup__Channel_html_ga07892a3c0c31e7a3eecf76ec72a8669d"><div class="ttname"><a href="group__Channel.html#ga07892a3c0c31e7a3eecf76ec72a8669d">iio_channel_is_scan_element</a></div><div class="ttdeci">bool iio_channel_is_scan_element(const struct iio_channel *chn)</div><div class="ttdoc">Return True if the given channel is a scan element.</div><div class="ttdef"><b>Definition:</b> channel.c:273</div></div>
<div class="ttc" id="agroup__Device_html_ga3b8d1e621357f0755925d98555f53d9a"><div class="ttname"><a href="group__Device.html#ga3b8d1e621357f0755925d98555f53d9a">iio_device_set_trigger</a></div><div class="ttdeci">int iio_device_set_trigger(const struct iio_device *dev, const struct iio_device *trigger)</div><div class="ttdoc">Associate a trigger to a given device.</div><div class="ttdef"><b>Definition:</b> device.c:402</div></div>
<div class="ttc" id="astructiio__context_html"><div class="ttname"><a href="structiio__context.html">iio_context</a></div><div class="ttdoc">Contains the representation of an IIO context.</div></div>
<div class="ttc" id="agroup__TopLevel_html_ga4a117b0ac02e97aeda92e33c063f7cf0"><div class="ttname"><a href="group__TopLevel.html#ga4a117b0ac02e97aeda92e33c063f7cf0">iio_strerror</a></div><div class="ttdeci">__api void iio_strerror(int err, char *dst, size_t len)</div><div class="ttdoc">Get a string description of an error code.</div><div class="ttdef"><b>Definition:</b> utilities.c:198</div></div>
<div class="ttc" id="agroup__Buffer_html_ga000d2f4c8b72060db1c38ec905bf4156"><div class="ttname"><a href="group__Buffer.html#ga000d2f4c8b72060db1c38ec905bf4156">iio_buffer_first</a></div><div class="ttdeci">void * iio_buffer_first(const struct iio_buffer *buffer, const struct iio_channel *chn)</div><div class="ttdoc">Find the first sample of a channel in a buffer.</div><div class="ttdef"><b>Definition:</b> buffer.c:250</div></div>
<div class="ttc" id="astructiio__device_html"><div class="ttname"><a href="structiio__device.html">iio_device</a></div><div class="ttdoc">Represents a device in the IIO context.</div></div>
<div class="ttc" id="agroup__Debug_html_gadbb2dabfdd85c3f2c6b168f0512c7748"><div class="ttname"><a href="group__Debug.html#gadbb2dabfdd85c3f2c6b168f0512c7748">iio_channel_get_data_format</a></div><div class="ttdeci">const struct iio_data_format * iio_channel_get_data_format(const struct iio_channel *chn)</div><div class="ttdoc">Get a pointer to a channel's data format structure.</div><div class="ttdef"><b>Definition:</b> channel.c:355</div></div>
<div class="ttc" id="agroup__Context_html_gade1dadfb5bc3c3b236add67f803c50c3"><div class="ttname"><a href="group__Context.html#gade1dadfb5bc3c3b236add67f803c50c3">iio_context_find_device</a></div><div class="ttdeci">struct iio_device * iio_context_find_device(const struct iio_context *ctx, const char *name)</div><div class="ttdoc">Try to find a device structure by its ID, label or name.</div><div class="ttdef"><b>Definition:</b> context.c:294</div></div>
<div class="ttc" id="agroup__Buffer_html_gaea8067aca27b93a1260a0c563607a501"><div class="ttname"><a href="group__Buffer.html#gaea8067aca27b93a1260a0c563607a501">iio_device_create_buffer</a></div><div class="ttdeci">struct iio_buffer * iio_device_create_buffer(const struct iio_device *dev, size_t samples_count, bool cyclic)</div><div class="ttdoc">Create an input or output buffer associated to the given device.</div><div class="ttdef"><b>Definition:</b> buffer.c:26</div></div>
<div class="ttc" id="agroup__Channel_html_gacd227a6861960ea2fb49d957f62887dd"><div class="ttname"><a href="group__Channel.html#gacd227a6861960ea2fb49d957f62887dd">iio_channel_read_raw</a></div><div class="ttdeci">size_t iio_channel_read_raw(const struct iio_channel *chn, struct iio_buffer *buf, void *dst, size_t len)</div><div class="ttdoc">Demultiplex the samples of a given channel.</div><div class="ttdef"><b>Definition:</b> channel.c:542</div></div>
<div class="ttc" id="agroup__TopLevel_html_gaaa29e5bac86d00a1cef6e2d00b0ea24c"><div class="ttname"><a href="group__TopLevel.html#gaaa29e5bac86d00a1cef6e2d00b0ea24c">iio_library_get_version</a></div><div class="ttdeci">__api void iio_library_get_version(unsigned int *major, unsigned int *minor, char git_tag[8])</div><div class="ttdoc">Get the version of the libiio library.</div><div class="ttdef"><b>Definition:</b> utilities.c:186</div></div>
<div class="ttc" id="agroup__Device_html_ga7e3e5dee1ac8c082de038829c88edda8"><div class="ttname"><a href="group__Device.html#ga7e3e5dee1ac8c082de038829c88edda8">iio_device_is_trigger</a></div><div class="ttdeci">bool iio_device_is_trigger(const struct iio_device *dev)</div><div class="ttdoc">Return True if the given device is a trigger.</div><div class="ttdef"><b>Definition:</b> device.c:368</div></div>
<div class="ttc" id="agroup__Context_html_ga21076125f817a680e0c01d4a490f0416"><div class="ttname"><a href="group__Context.html#ga21076125f817a680e0c01d4a490f0416">iio_create_default_context</a></div><div class="ttdeci">struct iio_context * iio_create_default_context(void)</div><div class="ttdoc">Create a context from local or remote IIO devices.</div><div class="ttdef"><b>Definition:</b> context.c:415</div></div>
<div class="ttc" id="agroup__Device_html_gae10ff440f64dac52b4229eb3f2ebea76"><div class="ttname"><a href="group__Device.html#gae10ff440f64dac52b4229eb3f2ebea76">iio_device_get_channels_count</a></div><div class="ttdeci">unsigned int iio_device_get_channels_count(const struct iio_device *dev)</div><div class="ttdoc">Enumerate the channels of the given device.</div><div class="ttdef"><b>Definition:</b> device.c:143</div></div>
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
    Copyright <a href="https://github.com/analogdevicesinc/libiio/blob/master/Contributors.md">libIIO Contributors</a>
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
